(this["webpackJsonpez-walking"]=this["webpackJsonpez-walking"]||[]).push([[3],{100:function(e,t,n){},101:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),i=(n(63),n(18)),l=n.n(i),u=n(23),s=n(10),f=(n(64),n(1)),m=n(14),d=(n(69),n(17)),p=n(20),b=n(31),g=n(12),h=n(13),v=n(33),E=Object(m.b)(null,(function(e){return{setVerified:function(t){return e(Object(p.d)(t))},storeToken:function(t,n){return e(Object(p.c)(t,n))}}}))((function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(null),l=Object(s.a)(i,2),u=l[0],f=l[1],m=Object(a.useState)(""),p=Object(s.a)(m,2),E=p[0],k=p[1],O=Object(a.useState)(""),j=Object(s.a)(O,2),w=j[0],y=j[1],N=Object(a.useState)(!1),T=Object(s.a)(N,2),S=T[0],x=T[1],A=Object(a.useState)(""),C=Object(s.a)(A,2),I=C[0],R=C[1];Object(a.useEffect)((function(){o(!0);var t=window.location.href.split("/"),n=t[t.length-1];h.a.post("/verifytoken",{token:n}).then((function(t){o(!1),console.log(t.data),200===t.status?(e.setVerified(!0),e.storeToken(n,t.data),Object(g.a)("token"),k("success"),y("Verified"),R("Continue"),x(!0),f(t.status)):f(t.status)})).catch((function(e){o(!1),Object(g.a)("token"),k("error"),y("Failed"),x(!0),R("OK"),setTimeout((function(){f(e.response.status)}),2e3),console.log(e)}))}),[]);return r.a.createElement("div",{className:"full-page-wrapper flex-center flex-column"},c?r.a.createElement(d.a,null):S?r.a.createElement(v.a,{type:E,message:w,hideAlert:function(){x(!1),200===u&&setTimeout((function(){e.history.replace("/auth/signup")}),2e3)},show:S,confirmButtonText:I}):200===u?r.a.createElement(a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement("h4",null,"Redirecting...")):null===u?r.a.createElement(d.a,null):r.a.createElement("div",{className:"flex-column flex-center"},r.a.createElement("h4",null,"Something went wrong !"),r.a.createElement(b.a,{onClick:function(){return e.history.push("/auth/signin")}},"Login")))})),k=n(15),O=Object(m.b)(null,(function(e){return{logout:function(){return e(Object(k.b)())}}}))((function(e){return localStorage.removeItem("route"),Object(a.useEffect)((function(){Object(g.a)("token"),e.logout(),h.a.post("/logout"),setTimeout((function(){e.history.push("/auth/signin")}),2e3)}),[]),r.a.createElement("div",{className:"full-page-wrapper flex-center flex-column",style:{background:"white"}},r.a.createElement(d.a,null),r.a.createElement("h4",null,"Logging out..."))})),j=n(35),w=(n(101),function(e){return r.a.createElement("div",{className:"app-spinner full-page-wrapper"},r.a.createElement("img",{className:"app-spinner-logo",alt:"loading...",src:n(55)}),r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-loader"})))}),y=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12),n.e(10)]).then(n.bind(null,844))})),N=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(6),n.e(8)]).then(n.bind(null,841))})),T=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(13),n.e(9)]).then(n.bind(null,843))})),S=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,845))}));var x=Object(m.b)((function(e){return{auth:null!==e.login.token&&void 0!==e.login.token,verified:e.login.verified,loading:e.login.loading,userType:e.login.userType,token:e.login.token}}),(function(e){return{checkAuthStatus:function(){return e(Object(p.a)())}}}))(Object(f.g)((function(e){var t=Object(a.useState)(void 0!==e.location.pathname&&null!==e.location.pathname?e.location.pathname:"/"),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),m=Object(s.a)(i,2),d=m[0],p=m[1];Object(a.useEffect)(Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.location.href.includes("verifytoken")){t.next=3;break}return t.next=3,e.checkAuthStatus();case 3:case"end":return t.stop()}}),t)}))),[]),Object(a.useEffect)((function(){setTimeout((function(){p(!0)}),1e3)}),[]),Object(a.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,"Bearer ".concat(e.token);case 2:h.a.defaults.headers.common.Authorization=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.token]),Object(a.useEffect)((function(){window.location.href.includes("/auth")||window.location.href.includes("/verify")||(localStorage.setItem("route",e.location.pathname),o(void 0!==e.location.pathname&&null!==e.location.href?e.location.pathname:"/"))}),[window.location.href]);var b=r.a.createElement(f.b,{path:"/",render:function(e){return r.a.createElement(y,e)}});return"partner"===e.userType?b=r.a.createElement(f.b,{path:"/",render:function(e){return r.a.createElement(N,e)}}):"store"===e.userType&&(b=r.a.createElement(f.b,{path:"/",render:function(e){return r.a.createElement(T,e)}})),d?e.loading?r.a.createElement("div",{className:"full-page-wrapper flex-center bg-milky"},r.a.createElement(w,null)):r.a.createElement("div",{className:"App"},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",{className:"full-page-wrapper flex-center bg-milky"},r.a.createElement(w,null))},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/verifytoken/:token",component:E}),r.a.createElement(f.b,{path:"/logout",component:Object(j.a)(O)}),e.auth?r.a.createElement(a.Fragment,null,b,r.a.createElement(f.a,{to:c})):r.a.createElement(a.Fragment,null,r.a.createElement(f.b,{path:"/auth",component:S}),r.a.createElement(f.a,{to:"/auth"}))))):r.a.createElement(w,null)}))),A=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(103);var I=n(54),R=n(16),U=n(3),_=n(8),L={token:null,userType:null,verified:!1,temporaryToken:null,email:null,loading:!1,logo:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.b:return Object(U.a)(Object(U.a)({},e),{},{token:t.token,userType:t.userType,loading:!1,logo:t.logo});case _.d:return Object(U.a)(Object(U.a)({},e),{},{verified:t.status});case _.c:return Object(U.a)(Object(U.a)({},e),{},{temporaryToken:t.token,email:t.email});case _.a:return Object(U.a)(Object(U.a)({},e),{},{userType:null,token:null,loading:!1,temporaryToken:null,email:null});case _.e:return Object(U.a)(Object(U.a)({},e),{},{userType:null,token:null,loading:!0,temporaryToken:null,email:null});default:return e}},z=n(53),P=Object(R.c)({login:W}),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,F=Object(R.e)(P,B(Object(R.a)(z.a)));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:F},r.a.createElement(I.a,null,r.a.createElement(x,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");A?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):C(t,e)}))}}()},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(3);function r(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=Object(a.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var c in n){r+="; "+c;var o=n[c];!0!==o&&(r+="="+o)}document.cookie=r}function o(e){c(e,"",{"max-age":-1})}},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(50),r=n.n(a),c=n(12),o=r.a.create({baseURL:"http://13.233.83.5:5000/api/",headers:{Authorization:"Bearer ".concat(Object(c.b)("token"))}})},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return s}));var a=n(8),r=n(12),c=n(13),o=function(e,t,n){return{type:a.b,token:e,userType:t,logo:n||null}},i=function(){return{type:a.a}},l=function(e,t){return{type:a.c,token:e,email:t}},u=function(e){return{type:a.d,status:e}},s=function(){var e=Object(r.b)("token");return function(t){if(null===e||"null"===e||""===e||void 0===e)return t(i());t({type:a.e}),c.a.post("/checkauthstatus",{token:e}).then((function(e){200===e.status?(t(o(e.data.token,e.data.type,e.data.logo)),Object(r.c)("token",e.data.token,{expires:new Date(3030,0,1).toUTCString()}),console.log(new Date(3030,0,1).toUTCString())):t(i())})).catch((function(e){console.log(e),t(i())}))}}},17:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(70);t.a=function(e){return r.a.createElement("div",{className:"sk-cube-grid"},r.a.createElement("div",{className:"sk-cube sk-cube1"}),r.a.createElement("div",{className:"sk-cube sk-cube2"}),r.a.createElement("div",{className:"sk-cube sk-cube3"}),r.a.createElement("div",{className:"sk-cube sk-cube4"}),r.a.createElement("div",{className:"sk-cube sk-cube5"}),r.a.createElement("div",{className:"sk-cube sk-cube6"}),r.a.createElement("div",{className:"sk-cube sk-cube7"}),r.a.createElement("div",{className:"sk-cube sk-cube8"}),r.a.createElement("div",{className:"sk-cube sk-cube9"}))}},20:function(e,t,n){"use strict";var a=n(15);n.d(t,"b",(function(){return a.c})),n.d(t,"d",(function(){return a.e})),n.d(t,"c",(function(){return a.d})),n.d(t,"a",(function(){return a.a}))},28:function(e,t,n){e.exports=n.p+"static/media/error.23edc42b.gif"},31:function(e,t,n){"use strict";var a=n(3),r=n(0),c=n.n(r),o=n(36);t.a=function(e){return c.a.createElement("button",{style:Object(a.a)({},e.style),disabled:e.disabled,className:e.loading?"loading-style "+(e.className?e.className:"bg-green lg"):e.className?e.className:"bg-green lg",type:e.type?e.type:"button",onClick:e.loading?function(){}:e.onClick},e.loading?c.a.createElement(r.Fragment,null,c.a.createElement(o.a,null)):e.children)}},33:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=(n(88),n(51)),o=n.n(c),i=n(28),l=n.n(i);t.a=function(e){return e.show?r.a.createElement("div",{className:"alert-container",onClick:function(){return e.hideAlert()}},r.a.createElement("div",{className:"alert-mini-container "+("success"===e.type?"success-bg":"error"===e.type?"error-bg":"white-bg")},r.a.createElement("h4",{className:"alert-message"},e.message),r.a.createElement("div",{className:"alert",style:{backgroundImage:"url('"+("success"===e.type?o.a:(e.type,l.a))+"')"}}),r.a.createElement("button",{onClick:function(){return e.hideAlert()},className:"alert-button"},e.confirmButtonText?e.confirmButtonText:"OK"))):null}},35:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(52),o=n.n(c);n(100);t.a=function(e){return function(t){return r.a.createElement("div",{className:"page"},r.a.createElement(o.a,{transitionAppear:!0,transitionAppearTimeout:600,transitionEnterTimeout:600,transitionLeaveTimeout:200,transitionName:"SlideIn"},r.a.createElement(e,t)))}}},36:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(87);t.a=function(e){return r.a.createElement("div",{className:"loader"})}},51:function(e,t,n){e.exports=n.p+"static/media/success2.8d2d721d.gif"},55:function(e,t,n){e.exports=n.p+"static/media/EZWalkin-Logo.a2bee980.jpg"},58:function(e,t,n){e.exports=n(104)},63:function(e,t,n){},64:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));var a="START_LOGIN",r="LOGIN_SUCCESS",c="LOGIN_FAILURE",o="SET_TEMPORARY_TOKEN",i="SET_VERIFIED"},87:function(e,t,n){},88:function(e,t,n){}},[[58,4,7]]]);
//# sourceMappingURL=main.438cb69b.chunk.js.map